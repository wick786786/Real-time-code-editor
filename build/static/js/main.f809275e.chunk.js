(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){e.exports=a(216)},128:function(e,t,a){},129:function(e,t,a){},21:function(e,t){e.exports={JOIN:"join",JOINED:"joined",DISCONNECTED:"disconnected",CODE_CHANGE:"code-change",SYNC_CODE:"sync-code",LEAVE:"leave"}},216:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(110),o=a.n(r),l=(a(128),a(129),a(56)),s=a(1),m=a(20),u=a.n(m),i=a(218);var d=()=>{const e=Object(s.p)(),[t,a]=Object(n.useState)(""),[r,o]=Object(n.useState)(""),l=()=>{t&&r?e("/editor/".concat(t),{state:{username:r}}):u.a.error("ROOM ID & username is required")},m=e=>{"Enter"===e.code&&l()};return c.a.createElement("div",{className:"homePageWrapper"},c.a.createElement("div",{className:"formWrapper"},c.a.createElement("img",{className:"homePageLogo",src:"/code-sync.png",alt:"code-sync-logo"}),c.a.createElement("h4",{className:"mainLabel"},"Paste invitation ROOM ID"),c.a.createElement("div",{className:"inputGroup"},c.a.createElement("input",{type:"text",className:"inputBox",placeholder:"ROOM ID",onChange:e=>a(e.target.value),value:t,onKeyUp:m}),c.a.createElement("input",{type:"text",className:"inputBox",placeholder:"USERNAME",onChange:e=>o(e.target.value),value:r,onKeyUp:m}),c.a.createElement("button",{className:"btn joinBtn",onClick:l},"Join"),c.a.createElement("span",{className:"createInfo"},"If you don't have an invite then create \xa0",c.a.createElement("a",{onClick:e=>{e.preventDefault();const t=Object(i.a)();a(t),u.a.success("Created a new room")},href:"",className:"createNewBtn"},"new room")))),c.a.createElement("footer",null,c.a.createElement("h4",null,"Built with \ud83d\udc9b \xa0 by \xa0",c.a.createElement("a",{href:"https://github.com/codersgyan"},"Coder's Gyan"))))},E=a(21),p=a.n(E),N=a(121);var f=e=>{let{username:t}=e;return c.a.createElement("div",{className:"client"},c.a.createElement(N.a,{name:t,size:50,round:"14px"}),c.a.createElement("span",{className:"userName"},t))},C=a(35),O=a.n(C);a(206),a(207),a(208),a(209),a(211);var g=e=>{let{socketRef:t,roomId:a,onCodeChange:r}=e;const o=Object(n.useRef)(null);return Object(n.useEffect)(()=>{!async function(){o.current=O.a.fromTextArea(document.getElementById("realtimeEditor"),{mode:{name:"javascript",json:!0},theme:"dracula",autoCloseTags:!0,autoCloseBrackets:!0,lineNumbers:!0}),o.current.on("change",(e,n)=>{const{origin:c}=n,o=e.getValue();r(o),"setValue"!==c&&t.current.emit(p.a.CODE_CHANGE,{roomId:a,code:o})})}()},[]),Object(n.useEffect)(()=>(t.current&&t.current.on(p.a.CODE_CHANGE,e=>{let{code:t}=e;null!==t&&o.current.setValue(t)}),()=>{t.current.off(p.a.CODE_CHANGE)}),[t.current]),c.a.createElement("textarea",{id:"realtimeEditor"})},v=a(122);var b=()=>{const e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(s.n)(),{roomId:r}=Object(s.r)(),o=Object(s.p)(),[l,m]=Object(n.useState)([]);return Object(n.useEffect)(()=>((async()=>{var n;function c(e){console.log("socket error",e),u.a.error("Socket connection failed, try again later."),o("/")}e.current=await(async()=>Object(v.a)(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BACKEND_URL,{"force new connection":!0,reconnectionAttempt:"Infinity",timeout:1e4,transports:["websocket"]}))(),e.current.on("connect_error",e=>c(e)),e.current.on("connect_failed",e=>c(e)),e.current.emit(p.a.JOIN,{roomId:r,username:null===(n=a.state)||void 0===n?void 0:n.username}),e.current.on(p.a.JOINED,n=>{var c;let{clients:r,username:o,socketId:l}=n;o!==(null===(c=a.state)||void 0===c?void 0:c.username)&&(u.a.success("".concat(o," joined the room.")),console.log("".concat(o," joined"))),m(r),e.current.emit(p.a.SYNC_CODE,{code:t.current,socketId:l})}),e.current.on(p.a.DISCONNECTED,e=>{let{socketId:t,username:a}=e;u.a.success("".concat(a," left the room.")),m(e=>e.filter(e=>e.socketId!==t))})})(),()=>{e.current.disconnect(),e.current.off(p.a.JOINED),e.current.off(p.a.DISCONNECTED)}),[]),a.state?c.a.createElement("div",{className:"mainWrap"},c.a.createElement("div",{className:"aside"},c.a.createElement("div",{className:"asideInner"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{className:"logoImage",src:"/code-sync.png",alt:"logo"})),c.a.createElement("h3",null,"Connected"),c.a.createElement("div",{className:"clientsList"},l.map(e=>c.a.createElement(f,{key:e.socketId,username:e.username})))),c.a.createElement("button",{className:"btn copyBtn",onClick:async function(){try{await navigator.clipboard.writeText(r),u.a.success("Room ID has been copied to your clipboard")}catch(e){u.a.error("Could not copy the Room ID"),console.error(e)}}},"Copy ROOM ID"),c.a.createElement("button",{className:"btn leaveBtn",onClick:function(){o("/")}},"Leave")),c.a.createElement("div",{className:"editorWrap"},c.a.createElement(g,{socketRef:e,roomId:r,onCodeChange:e=>{t.current=e}}))):c.a.createElement(s.a,{to:"/"})};var I=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(m.Toaster,{position:"top-right",toastOptions:{success:{theme:{primary:"#4aed88"}}}})),c.a.createElement(l.a,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/",element:c.a.createElement(d,null)}),c.a.createElement(s.b,{path:"/editor/:roomId",element:c.a.createElement(b,null)}))))};var h=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,219)).then(t=>{let{getCLS:a,getFID:n,getFCP:c,getLCP:r,getTTFB:o}=t;a(e),n(e),c(e),r(e),o(e)})};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(I,null)),document.getElementById("root")),h()}},[[123,1,2]]]);
//# sourceMappingURL=main.f809275e.chunk.js.map